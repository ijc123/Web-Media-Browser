<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:composite="http://java.sun.com/jsf/composite"
      xmlns:cc="http://java.sun.com/jsf/composite/components/"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:my="/WEB-INF/mytags">
<head>
<title>Not present in rendered output</title>
</head>
<body>
<composite:interface>

</composite:interface>
<composite:implementation>
<h:outputScript library="javascript" name="jquery-1.5.1.js" target="head"/>
<h:outputScript library="javascript" name="jquery.json-2.2.js" target="head"/>
<h:outputScript library="components" name="tagSearch.js" target="head"/>
<h:form id="tagSearchForm">
 <rich:panel> 	
       <f:facet name="header">
          <h:outputText value="Select Tags"/>          
       </f:facet>   
       <rich:tabPanel switchType="client" activeItem="#{tagSearchBean.selectedTab}" id="tabPanel">
        	<rich:tab header="Category" id="category">
       			<cc:tagSearchByCategory onTagClick="tagSearch.AddSelectedTag('#{tag.name}', 'category');" 
       			bean="#{tagSearchBean}"/>
       		</rich:tab>
       		<rich:tab header="Cloud" id="cloud">
       			<cc:tagSearchByCloud onTagClick="tagSearch.AddSelectedTag('#{tag.name}','cloud');" 
       			bean="#{tagSearchBean}"/>
       		</rich:tab>
       	</rich:tabPanel>
       	<h:inputHidden id="queryTags"  value="#{tagSearchBean.hiddenQueryTags}" converter="converters.SelectedTagsConverter"/>  
       	<h:inputHidden id="selectedTab"  value="category"/>      		       		   
   </rich:panel>
   <rich:panel header="Query" style="float: left; clear: both; width: 100%">
   		<rich:dataGrid id="queryTagDataGrid" value="#{tagSearchBean.queryTagItems}" var="tag"
               columns="5" elements="5" width="600px" border="0" style="margin-left:auto; margin-right:auto">
               <rich:panel onclick="tagSearch.RemoveSelectedTag('#{cc.clientId}','#{tag.name}');">
                   <f:facet name="header">
                       <h:outputText value="#{tag.name}" style="float:left;"/>
                       <h:outputText value="#{tag.used}" style="float:right; color:red"/>
                       <h:panelGroup layout="block" style="clear: both;"/>                      
                   </f:facet>
                   <h:panelGrid columns="2">
                       <h:graphicImage id="tagImage" url="#{tag.shortTagImageURL}" style="height: 150px; display: block; 
                       margin-left: auto; margin-right: auto"/>
                   </h:panelGrid>
               </rich:panel>
               <f:facet name="footer">
                   <rich:dataScroller />
               </f:facet>
           </rich:dataGrid>
         <h:commandButton value="Search" type="submit" action="#{tagSearchBean.queryTableSearch}" style="margin: 10px;" 
         onclick="pager.SetToZero();"/>
   		 <h:commandButton value="Clear" type="button" onclick="tagSearch.ClearSearchTags('#{cc.clientId}')"/>	
   </rich:panel>   
   	<rich:panel id="queryTablePanel" header="Search Results">
	   	<cc:taggableQueryTable mediaList="#{tagSearchBean.mediaList}"/>
   	</rich:panel>
</h:form>
</composite:implementation>
</body>
</html>